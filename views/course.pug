

block content
  .course-detail
    .course-header
      .header-actions
        a.btn.btn-secondary(href="/teacher/dashboard") ← Back to courses
      h1= course.title
      if user && (user.role === 'teacher' || user.role === 'admin')
        .course-actions
          a.btn(href=`/courses/${course._id}/edit`) Edit Course
          form(method="POST" action=`/api/v1/courses/${course._id}?_method=DELETE` onsubmit="event.preventDefault(); fetch(this.action, { method: 'POST' }).then(() => window.location.href='/teacher/dashboard')")
            button.btn.btn-danger(type="submit") Delete Course
          
    .course-content
      .course-info
        p= course.description
        .meta
          p Teacher: #{course.teacher.name}
          p Duration: #{course.weeks} weeks
          p Tuition: $#{course.tuition}
          p Skill Level: #{course.minimumSkill}

      if course.modules && course.modules.length > 0
        .modules-section
          h2 Modules
          each mod, modIndex in course.modules
            .module
              h3= mod.title
              if mod.lessons && mod.lessons.length > 0
                each lesson, lessonIndex in mod.lessons
                  .lesson
                    h4 Lesson #{lessonIndex + 1}: #{lesson.title}
                    p= lesson.text
                    if lesson.video
                      video(controls width="600")
                        source(src=`/api/v1/courses/video/${lesson.video}` type="video/mp4")
                        | Your browser does not support the video tag.

block scripts
  if user && (user.role === 'teacher' || user.role === 'admin')
    script(src="/js/teacherDashboard.js")